<div class="albums-container">
    <ng-container *ngIf="arePhotosLoading">
        <ng-container *ngFor="let photoLoading of getPaginatedLoadingPhotos(); let i = index;">
            <ng-container *ngIf="photoLoading">
                <div class="column">
                    <div class="photo-container">
                        <mat-spinner></mat-spinner>
                    </div>
                </div>
            </ng-container>

            <ng-container *ngIf="!photoLoading">
                <ng-container [ngTemplateOutlet]="photoTemplate"
                    [ngTemplateOutletContext]="{photo: photos[i]}"></ng-container>
            </ng-container>
        </ng-container>
    </ng-container>

    <ng-container *ngIf="!arePhotosLoading">
        <ng-container *ngFor="let photo of getPaginatedPhotos()">
            <!--In this case photos is a reference for albums view-->
            <ng-container [ngTemplateOutlet]="photoTemplate" [ngTemplateOutletContext]="{photo: photo}"></ng-container>
        </ng-container>

        <ng-container *ngIf="photosToShow.length === 0">
            <div class="image-not-found-container">
                <img src="assets/images/Image-not-found.png">
            </div>
            <p>No se encontraron fotos</p> <!--TODO: We need to review this later-->
        </ng-container>
    </ng-container>
</div>

<mat-paginator [length]="photosToShow.length" [pageSize]="pageSize" [pageIndex]="pageIndex"
    (page)="onPageChange($event)" showFirstLastButtons></mat-paginator>

<ng-template #photoTemplate let-photo='photo'>
    <div class="column">
        <div class="photo-container photo-container-with-content" (click)="navigateTo('album/' + photo.album.albumId)">
            <img [src]="photo.photoUrl">
            <div class="photo-legend">
                <h4 class="album-name">{{photo.album.albumName}}</h4>
                <h5 class="album-number-photos">{{photo.album.photos.length}} fotos</h5>
            </div>
        </div>
    </div>
</ng-template>